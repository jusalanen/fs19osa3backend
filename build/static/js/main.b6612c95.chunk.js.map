{"version":3,"sources":["components/FilteredPersons.js","components/Phonebook.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","components/ErrorMessage.js","App.js","index.js"],"names":["FilteredPersons","props","persons","concat","filter","delPerson","filtered","person","name","toLowerCase","includes","react_default","a","createElement","map","key","width","number","onClick","window","confirm","id","Phonebook","handleDelete","components_FilteredPersons","Filter","handleFilterChange","value","onChange","PersonForm","addNameNumber","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","services_persons","axios","get","then","response","data","newObject","post","strDel","String","delete","put","Notification","_ref","message","className","ErrorMessage","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","setMessage","_useState11","_useState12","errMessage","setErrMessage","useEffect","console","log","personService","components_Notification","components_ErrorMessage","components_Filter","event","target","components_PersonForm","preventDefault","names","push","forEach","changedPerson","setTimeout","catch","error","personObject","components_Phonebook","personId","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.b6612c95.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst FilteredPersons = (props) => {\r\n  const persons = [].concat(props.persons)\r\n  const filter = props.filter\r\n  const delPerson = props.delPerson\r\n  const filtered = persons.filter( person => \r\n    person.name.toLowerCase().includes(filter.toLowerCase())\r\n  )\r\n\r\n  return <div><table><tbody>\r\n    {filtered.map( person => <tr key={person.name}>\r\n      <td width='160'>{person.name}</td><td width='120'>{person.number}</td>\r\n      <td width='50'> <button onClick={ () => {\r\n        if(window.confirm( 'Do you want to delete ' + person.name + ' ?' )) {\r\n          delPerson(person.id)}}}\r\n          >delete</button></td></tr>)}\r\n  </tbody></table></div>\r\n}\r\n\r\nexport default FilteredPersons","import React from 'react'\r\nimport FilteredPersons from './FilteredPersons'\r\n\r\nconst Phonebook = ( props ) => {\r\n  const persons = props.persons\r\n  const filter = props.filter\r\n  const delPerson = props.handleDelete\r\n  return <div>\r\n    <h2>Numbers</h2>\r\n    <FilteredPersons persons={persons} filter={filter} delPerson={delPerson} />\r\n  </div>   \r\n}\r\n\r\nexport default Phonebook","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n  const filter = props.filter\r\n  const handleFilterChange = props.handleFilterChange\r\n  return (\r\n  <div>filter with: <input value={filter} \r\n    onChange={handleFilterChange}/>\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n  const addNameNumber = props.addNameNumber\r\n  const newName = props.newName\r\n  const handleNameChange = props.handleNameChange\r\n  const newNumber= props.newNumber\r\n  const handleNumberChange = props.handleNumberChange\r\n\r\n  return (\r\n    <div>\r\n      <h2>Add a new name and a number</h2>\r\n      <form onSubmit={addNameNumber}>\r\n        <table><tbody>\r\n        <tr><td width='50'>name: </td><td width='150'><input value={newName} \r\n          onChange={handleNameChange}/></td>\r\n        </tr>\r\n        <tr><td width='50'>number: </td><td width='150'><input value={newNumber}\r\n          onChange={handleNumberChange}/></td>\r\n        </tr>\r\n        </tbody></table> \r\n        <button type=\"submit\">add</button>     \r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\n\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst getOne = id => {\r\n  const request = axios.get(baseUrl.concat('/', String(id)))\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const strDel = baseUrl.concat('/', String(id))\r\n  return axios.delete(strDel)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(baseUrl.concat('/', String(id)), newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, getOne, create, remove, update }","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='success'>\r\n      { message }\r\n    </div>\r\n  )\r\n  \r\n}\r\n\r\n  export default Notification\r\n","import React from 'react'\r\n\r\nconst ErrorMessage = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  return (\r\n    <div className='error'>\r\n      { message }\r\n    </div>\r\n  )  \r\n}\r\n\r\n  export default ErrorMessage","import React, { useState, useEffect } from 'react'\r\nimport Phonebook from './components/Phonebook'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\nimport ErrorMessage from './components/ErrorMessage'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ errMessage, setErrMessage ] = useState(null)\r\n\r\n\r\n  const hook = () => {\r\n    console.log('effect')\r\n    personService\r\n      .getAll()\r\n      .then( response => {\r\n        console.log('promise fulfilled')\r\n        console.log(response)\r\n        setPersons(response)\r\n      })\r\n  }\r\n  \r\n  useEffect(hook, [])\r\n\r\n  const addNameNumber = (event) => {\r\n    event.preventDefault()\r\n    const names = []\r\n    persons.map( person => names.push(person.name) )\r\n    if (names.includes(newName)) {  \r\n      persons.forEach((person) => {\r\n        if (person.name === newName) {\r\n          if (window.confirm(newName + ' is already included in Phonebook. Replace the old number with a new one ?')) {\r\n            const changedPerson = {\r\n              name: person.name,\r\n              number: newNumber,\r\n              id: person.id\r\n            }\r\n            personService\r\n            .update(person.id, changedPerson)\r\n            .then( () => {\r\n              personService.getAll()\r\n              .then( response => {\r\n                setPersons(response)\r\n              })\r\n              setMessage(\r\n              `Number of '${changedPerson.name}' changed to '${changedPerson.number}'`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n              setNewName('')\r\n              setNewNumber('')\r\n            }).catch(error => {\r\n              console.log(error)\r\n              setErrMessage(\r\n                `'${person.name}' was already removed from server`\r\n              )\r\n              setTimeout(() => {\r\n                setErrMessage(null)\r\n              }, 5000)\r\n              setNewName('')\r\n              setNewNumber('')\r\n            })\r\n          }\r\n        }\r\n      })      \r\n    } else {\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n      personService\r\n        .create(personObject)\r\n        .then( response => {\r\n          setPersons(persons.concat(response))\r\n          setMessage(\r\n            `'${personObject.name}' added to Phonebook`\r\n          )\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n          setNewName('')\r\n          setNewNumber('') \r\n        }).catch( error => {\r\n          console.log(error)\r\n          setErrMessage(error.response.data.error)\r\n          setTimeout(() => {\r\n            setErrMessage(null)\r\n          }, 5000)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleDelete = (personId) => {\r\n    let delPerson = null\r\n    persons.forEach( person => {\r\n      if (person.id === personId)  {\r\n        delPerson = person\r\n      }\r\n    })\r\n    personService\r\n      .remove(personId)\r\n      .then( () => {\r\n        personService.getAll()\r\n        .then( response => {\r\n          setPersons(response)\r\n        })\r\n      })\r\n      setMessage(\r\n        `'${delPerson.name}' deleted from Phonebook`\r\n      )\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Notification message={message} />\r\n      <ErrorMessage message={errMessage} />\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\r\n      <PersonForm addNameNumber = {addNameNumber}\r\n                newName = {newName}\r\n                handleNameChange = {handleNameChange}\r\n                newNumber = {newNumber}\r\n                handleNumberChange = {handleNumberChange} />\r\n      <Phonebook persons={persons} filter={filter} handleDelete={handleDelete} />\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App'\r\nimport './index.css'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}